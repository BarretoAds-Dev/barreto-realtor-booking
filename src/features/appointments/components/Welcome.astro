---
import AppointmentBooking from './AppointmentBooking';

interface Props {
	availableSlots: Array<{
		date: string;
		dayOfWeek: string;
		slots: Array<{
			time: string;
			available: boolean;
			capacity: number;
			booked: number;
		}>;
		metadata?: {
			notes?: string;
			specialHours?: boolean;
		};
	}>;
	config: {
		slotDuration: number;
		bufferTime: number;
		businessHours: Record<string, any>;
	};
}

const { availableSlots, config } = Astro.props;
---

<div class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 py-8 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
	<!-- Elementos decorativos de fondo con blur -->
	<div class="absolute inset-0 overflow-hidden pointer-events-none">
		<div class="absolute -top-40 -right-40 w-96 h-96 bg-[#003d82]/8 rounded-full blur-3xl"></div>
		<div class="absolute -bottom-40 -left-40 w-96 h-96 bg-[#00a0df]/6 rounded-full blur-3xl"></div>
		<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-[#004C97]/5 rounded-full blur-3xl"></div>
	</div>
	
	<div class="max-w-5xl mx-auto relative z-10">
		<!-- Header estático (no necesita React) -->
		<div class="text-center mb-10">
			<div class="inline-flex items-center justify-center w-16 h-16 bg-[#003d82] backdrop-blur-xl mb-4 shadow-md shadow-black/20 border-2 border-[#00a0df]/20">
				<svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
				</svg>
			</div>
			<h1 class="text-4xl sm:text-5xl font-bold text-white mb-3 tracking-tight">Reserva tu cita</h1>
			<p class="text-lg text-gray-200 max-w-2xl mx-auto font-light">
				Selecciona una fecha y hora que funcione para ti. El proceso es rápido y sencillo.
			</p>
		</div>

		<!-- Componente principal con Islands Architecture -->
		<AppointmentBooking 
			availableSlots={availableSlots}
			config={config}
			client:load 
		/>
	</div>
</div>

<style>
	/* Estilos para los select dropdowns */
	select {
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
		background-position: right 0.75rem center;
		background-repeat: no-repeat;
		background-size: 1.5em 1.5em;
		padding-right: 2.5rem;
	}

	select:focus {
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2300a0df' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
	}

	/* Estilos para los radio buttons personalizados */
	input[type="radio"]:checked + div > div {
		border-color: #00a0df;
		background-color: #00a0df;
	}

	input[type="radio"]:checked + div > div > div {
		background-color: white;
	}

	/* Animación suave para mostrar/ocultar campos */
	.animate-fadeIn {
		animation: fadeIn 0.3s ease-in-out;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(-10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
</style>
