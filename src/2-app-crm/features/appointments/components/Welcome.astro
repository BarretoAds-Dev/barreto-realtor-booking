---
import BookingPublic from './BookingPublicForm/BookingPublic';

interface Props {
	availableSlots: Array<{
		date: string;
		dayOfWeek: string;
		slots: Array<{
			time: string;
			available: boolean;
			capacity: number;
			booked: number;
		}>;
		metadata?: {
			notes?: string;
			specialHours?: boolean;
		};
	}>;
	config: {
		slotDuration: number;
		bufferTime: number;
		businessHours: Record<string, any>;
	};
}

const { availableSlots, config } = Astro.props;
---

<div class="min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
	<div class="max-w-5xl mx-auto">
		<!-- Header -->
		<div class="text-center mb-8">
			<div class="inline-flex items-center justify-center w-16 h-16 bg-gray-900 rounded-xl mb-4 shadow-sm">
				<svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
				</svg>
			</div>
			<h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">Reserva tu cita</h1>
			<p class="text-gray-500 text-base sm:text-lg max-w-2xl mx-auto">
				Selecciona una fecha y hora que funcione para ti. El proceso es rápido y sencillo.
			</p>
		</div>

		<!-- client:visible - Se carga cuando entra en viewport (optimización Islands) -->
		<BookingPublic
			availableSlots={availableSlots}
			config={config}
			isModal={false}
			showConfirmation={true}
			useCRMForm={false}
			client:visible
		/>
	</div>
</div>

<style>
	/* Estilos para los select dropdowns */
	select {
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
		background-position: right 0.75rem center;
		background-repeat: no-repeat;
		background-size: 1.5em 1.5em;
		padding-right: 2.5rem;
	}

	select:focus {
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23111827' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
	}

	/* Estilos para los radio buttons personalizados */
	input[type="radio"]:checked + div > div {
		border-color: #111827;
		background-color: #111827;
	}

	input[type="radio"]:checked + div > div > div {
		background-color: white;
	}

	/* Animación suave para mostrar/ocultar campos */
	.animate-fadeIn {
		animation: fadeIn 0.3s ease-in-out;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(-10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
</style>
